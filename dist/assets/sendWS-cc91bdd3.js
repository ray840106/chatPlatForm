import{u as r,z as u,c as l}from"./index-124aa391.js";var e=null;const m=()=>{e=new WebSocket("wss://social.azurewebsites.net");const o=r(),t=u();console.log("websocket connected!!"),e.onmessage=function(n){const c=l(()=>o.state.rooms);let s=JSON.parse(n.data);s.hasOwnProperty("updData")&&(s.updData.ROOMID==t.query.ROOMID?o.commit("setWsRes",s):c.value.filter(i=>i.ROOMID==s.updData.ROOMID)&&o.commit("m_updRooms",s.updData))},e.onerror=function(n){console.log("error",n)}},d=o=>{a(e,function(){console.log("message sent!!!"),e.readyState===1&&e.send(JSON.stringify(o))})};function a(o,t){setTimeout(function(){o.readyState===1?(console.log("Connection is made"),t!=null&&t()):(console.log("wait for connection..."),a(o,t))},5)}export{m as c,d as s};
