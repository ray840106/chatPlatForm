import{z as C,u as F,e as E,c as h,r as v,f as c,g as N,o as a,a as u,b as e,h as b,t as n,d as p,k as _,n as U,l as k}from"./index-124aa391.js";import{D as x}from"./dialog-fff85c0d.js";import M from"./article-1c7c62eb.js";import"./modal-ed5c79ec.js";import"./sweetalert2.all-75d83f30.js";import"./PaperAirplaneIcon-2396592a.js";const P={class:"md:pl-72"},R={class:"h-60 relative z-0"},$=["src"],L={key:1,class:"absolute top-28 md:-left-6 left-0 h-44 w-44 rounded-full bg-white border-4"},D={class:"p-6 bg-white border border-gray-200 rounded-lg shadow dark:bg-gray-800 dark:border-gray-700 mt-16 md:mt-16 lg:mt-0"},B={class:"grid gap-6 mb-6 md:grid-cols-2 pt-8"},V=e("label",{class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"First name",-1),q={class:"p-2"},z=e("label",{class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Last name",-1),O={class:"p-2"},j=e("label",{class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Company",-1),H={class:"p-2"},Y=e("label",{class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Phone number",-1),G={class:"p-2"},J={class:"mb-6"},K=e("label",{class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Email address",-1),Q={class:"p-2"},W=e("hr",null,null,-1),X={key:0,class:"mt-3 inline-block"},Z={key:1,class:"mt-3 inline-block"},ee={key:2,class:"mt-3 inline-block"},de={__name:"friends",setup(te){const w=C(),d=F(),f=E(),i=h(()=>d.state.loginInfo),t=h(()=>d.state.friend),r=w.query.token||null,g=v(!1),m=v(!1);r&&S();function y(){c({method:"post",url:"API/friends",params:{method:"updFriend",loginInfo:i.value},data:{item:{STATUS:t.value.STATUS,token:r}}}).then(function(s){s.data.hasOwnProperty("get_friends")?d.dispatch("a_friends",s.data.get_friends):f.push({path:"/addFriend"})})}function S(){c({method:"post",url:"API/friends",params:{method:"getFriend",loginInfo:i.value},data:{item:{token:r}}}).then(function(s){d.dispatch("a_friend",s.data.get_friend)})}function A(){c({method:"post",url:"API/rooms",params:{method:"getRoom",loginInfo:i.value},data:{item:{token:r}}}).then(function(s){f.push({name:"chatPlatForm",query:{token:s.data.get_room.token,FRIEND_EMAIL:t.value.EMAIL}})})}function T(){c({method:"post",url:"API/friends",params:{method:"delFriend",loginInfo:i.value},data:{item:{token:r}}}).then(function(s){d.dispatch("a_friends",s.data.get_friends),f.push({path:"/addFriend"})})}return(s,o)=>{const I=N("font-awesome-icon");return a(),u("div",{class:U(i.value.mobile?"":"grid grid-cols-2")},[e("div",P,[e("div",R,[t.value.headshot!=""?(a(),u("img",{key:0,class:"absolute top-28 md:-left-6 left-0 h-44 w-44 rounded-full bg-white border-4",src:t.value.headshot},null,8,$)):(a(),u("div",L,[b(I,{icon:"fa-solid fa-user",class:"h-36 w-36 absolute left-3"})]))]),e("div",D,[e("div",B,[e("div",null,[V,e("span",q,n(t.value.FIRST_NAME),1)]),e("div",null,[z,e("span",O,n(t.value.LAST_NAME),1)]),e("div",null,[j,e("span",H,n(t.value.COMPANY),1)]),e("div",null,[Y,e("span",G,n(t.value.PHONE_NUMBER),1)])]),e("div",J,[K,e("span",Q,n(t.value.EMAIL),1)]),e("div",null,[W,t.value.STATUS==-200?(a(),u("div",X,[e("button",{onClick:o[0]||(o[0]=l=>{t.value.STATUS=1,g.value=!0}),type:"button",class:"mx-2 text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm w-full sm:w-auto px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800"},"Agree"),e("button",{onClick:o[1]||(o[1]=l=>m.value=!0),type:"button",class:"mx-2 text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm w-full sm:w-auto px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800"},"Reject")])):p("",!0),t.value.STATUS==1?(a(),u("div",Z,[e("button",{onClick:o[2]||(o[2]=l=>A()),type:"button",class:"mx-2 text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm w-full sm:w-auto px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800"},"Chat")])):p("",!0),t.value.STATUS==-201||t.value.STATUS==1?(a(),u("div",ee,[e("button",{onClick:o[3]||(o[3]=l=>m.value=!0),type:"button",class:"mx-2 text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm w-full sm:w-auto px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800"},n(t.value.STATUS==1?"Delete Friend":"Cancel Request"),1)])):p("",!0)])]),b(x,{onConfirm:o[4]||(o[4]=l=>y()),openShow:g.value,onClose:o[5]||(o[5]=l=>g.value=!1)},{body:_(()=>[k(" 同意好友申請:"+n(t.value.EMAIL),1)]),_:1},8,["openShow"]),b(x,{onConfirm:o[6]||(o[6]=l=>T()),openShow:m.value,onClose:o[7]||(o[7]=l=>m.value=!1)},{body:_(()=>[k(n((t.value.STATUS==1?"刪除好友: ":"拒絕申請: ")+t.value.EMAIL),1)]),_:1},8,["openShow"])]),b(M)],2)}}};export{de as default};
